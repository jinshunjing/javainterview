
### JVM内存区域
- 程序计数器，Java栈，本地方法栈，Java堆，堆外内存，方法区

### Java内存溢出
- 堆空间OOM
- 方法区/永久代OOM
- 不能创建新线程
- 栈溢出

### JVM性能调优
- 内存使用情况：jmap,jhat
- GC的性能: jstat

### 垃圾回收算法
- 分代收集算法：年轻代采用复制算法，年老代采用标记-整理算法
- 串行GC：标记-整理，没有内存碎片
- 并行GC：启动多个线程
- CMS并发标记清除算法：分4个阶段，初始化标记，并发标记，重新标记，并发清除。目标是为了缩短停机时间，但是有内存碎片。
- G1：划分成相同大小的Region，跟踪每个Region的垃圾收集情况，维护一个优先队列，优先回收高价值的Region。目标是既缩短停机时间，又要内存碎片少。也分4个阶段：初始化标记，并发标记，重新标记，清理回收。

### JVM内存模型
- 主内存，工作内存
- 原子性，可见性，有序性
- volatile: 保证共享变量的可见性。表示线程的工作内存无效：写操作强制刷新主内存，读操作直接从主内存读取
- happens-before: 有序性，比如加锁



